__BRYTHON__.use_VFS = true;
var scripts = {"$timestamp": 1588824567897, "ui": [".py", "from browser import document,websocket,console\n\nfrom ui.components.deck import DeckComponent\nfrom ui.components.login import LoginComponent\nfrom ui.components.match import MatchComponent\nfrom ui.components.mulligan import MulliganComponent\nfrom ui.components.wait import WaitComponent\n\nCOMMAND_ARGS_SEPARATOR=' '\nSERVER_ADDRESS='ws://0.0.0.0:8080/ws'\n\n\ndef send_name(*args,**kwargs):\n login_component.hide()\n name=login_component.get_name()\n ws.send(name)\n \n \nlogin_component=LoginComponent(document)\nlogin_component.set_action(send_name)\n\n\ndef send_deck(*args,**kwargs):\n deck_component.hide()\n deck=deck_component.get_deck()\n deck +='\\nend_deck'\n ws.send(deck)\n \n \ndeck_component=DeckComponent(document)\ndeck_component.set_action(send_deck)\n\n\ndef send_match(*args,**kwargs):\n match_component.hide()\n match=match_component.get_match()\n ws.send(match)\n \n \ndef send_match_password(*args,**kwargs):\n password=match_component.get_password()\n ws.send(password)\n \n \nmatch_component=MatchComponent(document)\nmatch_component.set_ok_action(send_match)\n\nwait_component=WaitComponent(document)\n\n\ndef send_mulligan(*args,**kwargs):\n ws.send('yes')\n \n \ndef send_keep(*args,**kwargs):\n ws.send('')\n \n \nmulligan_component=MulliganComponent(document)\nmulligan_component.set_mulligan_action(send_mulligan)\nmulligan_component.set_keep_action(send_keep)\n\nCOMMAND_SWITCH={\n'request_name':login_component.show,\n'request_deck':deck_component.show,\n'request_match':match_component.show,\n'request_match_password':send_match_password,\n'waiting_other_players':wait_component.show,\n'mulligan':mulligan_component.show,\n'start':console.log,\n\n\n}\n\n\ndef dispatch_command(event):\n try :\n  split_index=event.data.index(COMMAND_ARGS_SEPARATOR)\n  command_key=event.data[:split_index]\n  args=event.data[split_index+1:]\n except ValueError:\n  command_key=event.data\n  args=None\n  \n command=COMMAND_SWITCH.get(command_key)\n if command:\n  if args:\n   command(args)\n  else :\n   command()\n   \n console.log(f'{command_key}({type(args)})')\n \n \nws=websocket.WebSocket(SERVER_ADDRESS)\nws.bind('message',dispatch_command)\n", ["browser", "ui.components.deck", "ui.components.login", "ui.components.match", "ui.components.mulligan", "ui.components.wait"], 1], "ui.components.match": [".py", "from ui.components import Component\n\n\nclass MatchComponent(Component):\n _match_container='matchContainer'\n _match_input='matchInput'\n _match_password_input='matchPasswordInput'\n _match_buton='matchButton'\n \n def __init__(self,document):\n  super(MatchComponent,self).__init__(\n  document,\n  MatchComponent._match_container\n  )\n  self._input=document[MatchComponent._match_input]\n  self._password_input=document[MatchComponent._match_password_input]\n  self._ok=document[MatchComponent._match_buton]\n  self._first_try=True\n  \n def get_match(self):\n  return self._input.value\n  \n def get_password(self):\n  return self._password_input.value\n  \n def set_ok_action(self,action):\n  self._ok.bind(\n  'click',\n  action\n  )\n  \n def show(self):\n  super(MatchComponent,self).show()\n  if not self._first_try:\n   self._input.classList.add('is-danger')\n   self._input.classList.add('is-outlined')\n  self._first_try=False\n  self._input.value=''\n  self._password_input.value=''\n", ["ui.components"]], "ui.components.wait": [".py", "from ui.components import Component\n\n\nclass WaitComponent(Component):\n _wait_container='waitContainer'\n \n def __init__(self,document):\n  super(WaitComponent,self).__init__(\n  document,\n  WaitComponent._wait_container\n  )\n", ["ui.components"]], "ui.components": [".py", "class Component:\n\n def __init__(self,document,element_id):\n  self._document=document\n  self._element=document[element_id]\n  self._display=self._element.style.display\n  self.hide()\n  \n def hide(self):\n  self._element.style.display='none'\n  \n def show(self):\n  self._element.style.display=''\n", [], 1], "ui.components.login": [".py", "from ui.components import Component\n\n\nclass LoginComponent(Component):\n _login_container='loginContainer'\n _name_input='nameInput'\n _login_button='loginButton'\n \n def __init__(self,document):\n  super(LoginComponent,self).__init__(\n  document,\n  LoginComponent._login_container\n  )\n  self._name_input=document[LoginComponent._name_input]\n  self._login_button=document[LoginComponent._login_button]\n  self._first_try=True\n  \n def get_name(self):\n  return self._name_input.value\n  \n def set_action(self,action):\n  self._login_button.bind(\n  'click',\n  action\n  )\n  \n def show(self):\n  super(LoginComponent,self).show()\n  if not self._first_try:\n   self._name_input.classList.add('is-danger')\n   self._name_input.classList.add('is-outlined')\n  self._first_try=False\n  self._name_input.value=''\n", ["ui.components"]], "ui.components.deck": [".py", "from ui.components import Component\n\n\nclass DeckComponent(Component):\n _deck_container='deckContainer'\n _deck_input='deckInput'\n _deck_end_button='deckEndButton'\n \n def __init__(self,document):\n  super(DeckComponent,self).__init__(\n  document,\n  DeckComponent._deck_container\n  )\n  self._input=document[DeckComponent._deck_input]\n  self._ok=document[DeckComponent._deck_end_button]\n  \n def get_deck(self):\n  return self._input.value\n  \n def set_action(self,action):\n  self._ok.bind(\n  'click',\n  action\n  )\n  \n def reset(self):\n  self._input.value=''\n", ["ui.components"]], "ui.components.mulligan": [".py", "from browser import ajax,console\n\nimport json\nfrom ui.components import Component\n\n\nclass MulliganComponent(Component):\n _wait_container='mulliganContainer'\n _keep_button_id='\u1e31eepButton'\n _mulligan_button_id='mulliganButton'\n _cards_mulligan_container_id='cardsMulliganContainer'\n \n def __init__(self,document):\n  super(MulliganComponent,self).__init__(\n  document,\n  MulliganComponent._wait_container\n  )\n  self._keep_button=document[MulliganComponent._keep_button_id]\n  self._mulligan_button=document[MulliganComponent._mulligan_button_id]\n  \n def set_keep_action(self,action):\n  self._keep_button.bind('click',action)\n  \n def set_mulligan_action(self,action):\n  self._mulligan_button.bind('click',action)\n  \n def show(self,cards):\n  ''\n\n\n  \n  cards=json.loads(cards)\n  \n  super(MulliganComponent,self).show()\n  \n  images=self._document[MulliganComponent._cards_mulligan_container_id]\n  images.innerHTML=''\n  self._element.appendChild(images)\n  \n  def foo(response):\n   start=response.text.index('small')\n   start +=len('small')+3\n   end=response.text.index(',',start)\n   end -=1\n   sub=response.text[start:end]\n   \n   img=self._document.createElement('img')\n   img.src=sub\n   images.appendChild(img)\n   \n  for card in cards:\n   request=ajax.Ajax()\n   request.bind('complete',foo)\n   request.open(\n   'GET',\n   'https://api.scryfall.com/cards/named?exact='+card.replace(' ','+')\n   )\n   request.send()\n   \n", ["browser", "json", "ui.components"]]}
__BRYTHON__.update_VFS(scripts)
